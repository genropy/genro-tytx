<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>genro-tytx (JavaScript)</h1>
<p>JavaScript implementation of TYTX (Typed Text) protocol.</p>
<h2>Installation</h2>
<pre class="prettyprint source lang-bash"><code>npm install genro-tytx
</code></pre>
<h3>Optional Dependencies</h3>
<p>For precise decimal arithmetic (recommended for financial applications):</p>
<pre class="prettyprint source lang-bash"><code>npm install big.js       # Lightweight (8KB) - recommended
# or
npm install decimal.js   # Full-featured (32KB)
</code></pre>
<p>For MessagePack binary serialization:</p>
<pre class="prettyprint source lang-bash"><code>npm install @msgpack/msgpack
</code></pre>
<p>TYTX automatically detects and uses whichever libraries are installed.</p>
<h2>Quick Start</h2>
<pre class="prettyprint source lang-javascript"><code>const { from_text, as_typed_text, from_json, as_typed_json } = require('genro-tytx');

// Parse typed strings
from_text(&quot;123::L&quot;);           // → 123
from_text(&quot;99.99::N&quot;);         // → 99.99 (or Big if big.js installed)
from_text(&quot;2025-01-15::D&quot;);    // → Date object
from_text(&quot;true::B&quot;);          // → true

// Serialize with types
as_typed_text(123);            // → &quot;123::L&quot;
as_typed_text(new Date());     // → &quot;2025-01-15::D&quot;
as_typed_text(true);           // → &quot;true::B&quot;

// JSON
as_typed_json({ price: 99.99, date: new Date(2025, 0, 15) });
// → '{&quot;price&quot;:&quot;99.99::R&quot;,&quot;date&quot;:&quot;2025-01-15::D&quot;}'

from_json('{&quot;price&quot;:&quot;99.99::N&quot;,&quot;date&quot;:&quot;2025-01-15::D&quot;}');
// → { price: 99.99, date: Date }
</code></pre>
<h2>Type Codes (Genropy-Compatible)</h2>
<table>
<thead>
<tr>
<th>Code</th>
<th>Aliases</th>
<th>JS Type</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>L</code></td>
<td><code>I</code>, <code>INT</code>, <code>INTEGER</code>, <code>LONG</code></td>
<td><code>number</code></td>
<td><code>&quot;123::L&quot;</code></td>
</tr>
<tr>
<td><code>R</code></td>
<td><code>F</code>, <code>REAL</code>, <code>FLOAT</code></td>
<td><code>number</code></td>
<td><code>&quot;1.5::R&quot;</code></td>
</tr>
<tr>
<td><code>N</code></td>
<td><code>NUMERIC</code>, <code>DECIMAL</code></td>
<td><code>number</code>/<code>Big</code></td>
<td><code>&quot;100.50::N&quot;</code></td>
</tr>
<tr>
<td><code>B</code></td>
<td><code>BOOL</code>, <code>BOOLEAN</code></td>
<td><code>boolean</code></td>
<td><code>&quot;true::B&quot;</code></td>
</tr>
<tr>
<td><code>T</code></td>
<td><code>S</code>, <code>TEXT</code>, <code>STRING</code></td>
<td><code>string</code></td>
<td><code>&quot;hello::T&quot;</code></td>
</tr>
<tr>
<td><code>D</code></td>
<td><code>DATE</code></td>
<td><code>Date</code></td>
<td><code>&quot;2025-01-15::D&quot;</code></td>
</tr>
<tr>
<td><code>DH</code></td>
<td><code>DT</code>, <code>DHZ</code>, <code>DATETIME</code></td>
<td><code>Date</code></td>
<td><code>&quot;2025-01-15T10:00::DH&quot;</code></td>
</tr>
<tr>
<td><code>H</code></td>
<td><code>TIME</code>, <code>HZ</code></td>
<td><code>string</code></td>
<td><code>&quot;10:30:00::H&quot;</code></td>
</tr>
<tr>
<td><code>JS</code></td>
<td><code>JSON</code></td>
<td><code>object</code></td>
<td><code>'{&quot;a&quot;:1}::JS'</code></td>
</tr>
</tbody>
</table>
<h2>API Reference</h2>
<h3>Text Functions</h3>
<ul>
<li><code>from_text(value, type_code?)</code> - Parse typed string to JS value</li>
<li><code>as_text(value, format?, locale?)</code> - Convert to string</li>
<li><code>as_typed_text(value)</code> - Convert to typed string with <code>::code</code> suffix</li>
</ul>
<h3>JSON Functions</h3>
<ul>
<li><code>as_typed_json(data)</code> - Serialize to JSON with type suffixes</li>
<li><code>as_json(data)</code> - Serialize to standard JSON</li>
<li><code>from_json(json_str)</code> - Parse JSON with type hydration</li>
</ul>
<h3>XML Functions</h3>
<ul>
<li><code>as_typed_xml(data)</code> - Serialize to XML with type suffixes</li>
<li><code>as_xml(data)</code> - Serialize to standard XML</li>
<li><code>from_xml(xml_str)</code> - Parse XML with type hydration</li>
</ul>
<h3>MessagePack Functions</h3>
<p>Requires <code>@msgpack/msgpack</code>:</p>
<pre class="prettyprint source lang-javascript"><code>const { packb, unpackb } = require('genro-tytx/src/msgpack_utils');

const data = { price: 99.99, date: new Date('2025-01-15') };

// Pack to MessagePack bytes
const packed = packb(data);

// Unpack with types restored
const restored = unpackb(packed);
// restored.date is a Date object
</code></pre>
<ul>
<li><code>packb(data)</code> - Pack to MessagePack bytes with TYTX types</li>
<li><code>unpackb(packed)</code> - Unpack MessagePack bytes with type hydration</li>
<li><code>TYTX_EXT_TYPE</code> - ExtType code 42 (TYTX marker)</li>
</ul>
<h3>Registry</h3>
<ul>
<li><code>registry.register(type)</code> - Register custom type</li>
<li><code>registry.get(code)</code> - Get type by code</li>
<li><code>registry.is_typed(value)</code> - Check if string has type suffix</li>
</ul>
<h3>TytxModel</h3>
<p>Base class for creating TYTX-aware models:</p>
<pre class="prettyprint source lang-javascript"><code>const { TytxModel } = require('genro-tytx');

class Order extends TytxModel {}

// Create from TYTX JSON
const order = Order.fromTytx('{&quot;price&quot;: &quot;99.99::N&quot;, &quot;date&quot;: &quot;2025-01-15::D&quot;}');
console.log(order.price);  // 99.99 (number or Big)
console.log(order.date);   // Date object

// Serialize to TYTX JSON
const newOrder = new Order();
newOrder.price = 149.99;
newOrder.date = new Date();
newOrder.toTytx();  // '{&quot;price&quot;:&quot;149.99::R&quot;,&quot;date&quot;:&quot;2025-01-15::D&quot;}'

// Fetch from API (single object or array)
const orders = await Order.fetchTytx('/api/orders');
orders.forEach(o => console.log(o.price, o.date));

// MessagePack support (requires @msgpack/msgpack)
const packed = order.toTytxMsgpack();
const restored = Order.fromTytxMsgpack(packed);
</code></pre>
<p><strong>TytxModel Methods:</strong></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>toTytx()</code></td>
<td>Serialize instance to TYTX JSON string</td>
</tr>
<tr>
<td><code>toTytxMsgpack()</code></td>
<td>Serialize instance to MessagePack bytes</td>
</tr>
<tr>
<td><code>static fromTytx(json)</code></td>
<td>Create instance from TYTX JSON string or object</td>
</tr>
<tr>
<td><code>static fromTytxMsgpack(packed)</code></td>
<td>Create instance from MessagePack bytes</td>
</tr>
<tr>
<td><code>static fetchTytx(url, init?)</code></td>
<td>Fetch and deserialize from URL</td>
</tr>
<tr>
<td><code>static fetchTytxMsgpack(url, init?)</code></td>
<td>Fetch MessagePack and deserialize</td>
</tr>
</tbody>
</table>
<h2>Decimal Library Detection</h2>
<pre class="prettyprint source lang-javascript"><code>const { decimalLibName, isDecimalInstance } = require('genro-tytx');

console.log(decimalLibName);  // &quot;big.js&quot;, &quot;decimal.js&quot;, or &quot;number&quot;

const value = from_text(&quot;99.99::N&quot;);
console.log(isDecimalInstance(value));  // true if library installed
</code></pre>
<h2>Development</h2>
<pre class="prettyprint source lang-bash"><code># Run tests
npm test

# Generate docs
npm run docs
</code></pre>
<h2>Documentation</h2>
<p>Full documentation: <a href="https:%5C/%5C/genro-tytx.readthedocs.io/">https://genro-tytx.readthedocs.io/</a></p>
<h2>License</h2>
<p>Apache License 2.0</p>
<p>Copyright 2025 Softwell S.r.l.</p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-genro-tytx.html">genro-tytx</a></li><li><a href="module-json_utils.html">json_utils</a></li><li><a href="module-msgpack_utils.html">msgpack_utils</a></li><li><a href="module-registry.html">registry</a></li><li><a href="module-types.html">types</a></li><li><a href="module-tytx_model.html">tytx_model</a></li><li><a href="module-xml_utils.html">xml_utils</a></li></ul><h3>Classes</h3><ul><li><a href="module-tytx_model-TytxModel.html">TytxModel</a></li></ul><h3>Global</h3><ul><li><a href="global.html#dictToXml">dictToXml</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Sun Nov 30 2025 12:22:55 GMT+0100 (Central European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>